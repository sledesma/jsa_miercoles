<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>

		<style>
			html,
			body {
				margin: 0;
				padding: 0;
			}

			nav {
				background-color: #ccc;
				width: 20%;
				height: 100vh;
				position: fixed;
			}

			main {
				margin-left: 20%;
				background-color: whitesmoke;
				height: 100vh;
			}

			.color {
				padding: 40px;
				text-align: center;
				cursor: pointer;
				transition: all 0.3s;
			}

			.color-dragging {
                height: 0;
                padding: 0;
			}
		</style>
	</head>
	<body>
		<nav>
			<div class="color" data-color="red">Rojo</div>
			<div class="color" data-color="green">Verde</div>
			<div class="color" data-color="blue">Azul</div>
		</nav>

		<main>Hola</main>

		<script>
			// API HTML Drag And Drop
			// F (funciones): -
			// E (eventos):
			//  Al DOM: drag, dragend, dragenter, dragexit, dragleave, dragover, dragstart, drop
			// O (objetos): -
			const colors = document.querySelectorAll(".color");
            const main = document.querySelector("main");
            
            let nombreEnDrag = '';

			colors.forEach((color) => {
				color.draggable = true;
				color.style = `background-color: ${color.dataset.color}`;
				addDndListeners(color);
			});

            // FIN DE LA OPERACION
			main.addEventListener("drop", (e) => {
				// ACA NO TIENE QUE IR EL DROP
				e.preventDefault();
                main.style = `transition: all 0.2s ;background-color: ${e.dataTransfer.getData('color')}`;
            
                let el = document.querySelector('.color-dragging');
                el.classList.remove('color-dragging');
                el.innerHTML = nombreEnDrag;
            });

			main.addEventListener("dragover", (e) => {
                e.preventDefault();
				//console.log(e);
			});

			function addDndListeners(elemento) {
                // INICIO DE LA OPERACION
                elemento.addEventListener("dragstart", e => {
                    e.dataTransfer.setData('color', elemento.dataset.color);
                    nombreEnDrag = elemento.innerHTML;
                    elemento.innerHTML = '';
                });

				elemento.addEventListener("drag", (e) => {
					if (
						e.screenX == 0 &&
						e.screenY == 0 &&
						elemento.classList.contains("color-dragging")
					) {
						elemento.classList.remove("color-dragging");
					} else {
                        elemento.classList.add("color-dragging");
                    }
                    
				});
            }
            

		</script>
	</body>
</html>
